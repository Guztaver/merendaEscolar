<div class="container">
    <div class="header">
        <h1>Acquisition Dashboard</h1>
        <div class="nav-links">
            <a [routerLink]="['/acquisition/suppliers']" class="btn btn-secondary">Manage Suppliers</a>
            <a [routerLink]="['/acquisition/purchases']" class="btn btn-secondary">Manage Purchases</a>
        </div>
    </div>

    <div class="year-selector">
        <label for="year">Year:</label>
        <input type="number" id="year" [formControl]="yearControl" class="year-input" min="2000" max="2100">
    </div>

    @if (stats()) {
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-label">Total Spending</div>
            <div class="stat-value">{{ formatCurrency(stats()!.total) }}</div>
        </div>

        <div class="stat-card">
            <div class="stat-label">Family Farming Spending</div>
            <div class="stat-value">{{ formatCurrency(stats()!.familyFarming) }}</div>
        </div>

        <div class="stat-card">
            <div class="stat-label">Family Farming Percentage</div>
            <div class="stat-value">{{ stats()!.percentage }}%</div>
        </div>

        <div class="stat-card compliance-card" [ngClass]="getComplianceClass()">
            <div class="stat-label">Compliance Status</div>
            <div class="stat-value compliance-message">{{ getComplianceMessage() }}</div>
        </div>
    </div>

    <div class="progress-bar-container">
        <label class="progress-label">Family Farming Acquisition Progress</label>
        <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="stats()!.percentage" [ngClass]="getComplianceClass()"></div>
        </div>
        <div class="progress-info">
            <span>{{ stats()!.percentage }}%</span>
            <span class="target">Target: 45%</span>
        </div>
    </div>
    } @else {
    <p class="loading">Loading statistics...</p>
    }
</div>